import{A as t,u as i,c as e,ae as n,o as l,d as a,I as o}from"./index.2716c42f.js";function s(t,i){const e=document.createElementNS("http://www.w3.org/2000/svg",t);for(const n of Object.keys(i))e.setAttribute(n,i[n]);return e}function r(t,i,e){var n,l,a;let o=i.map((t=>t>0?t:0));if(2===o.length){const t=o[0],i=o[1];o=[t,Math.max(0,i-t)]}let r=0,d=o.length,u=0;for(;r<d;r++)u+=o[r];u||(d=2,u=1,o=[0,1]);const f=t.getBoundingClientRect(),h=f.width,c=f.height,p=h/2,g=c/2,m=Math.min(p,g);let y=e.innerRadius;"donut"!==e.type||y||(y=.5*m);const v=Math.PI,w=(t,i)=>{const e=t/u*v*2-v/2;return[i*Math.cos(e)+p,i*Math.sin(e)+g]};let k=0;for(r=0;r<d;r++){const i=o[r],d=i/u;let f,h;if(0!==d){if(1===d)if(y){const t=p-.01,i=g-m,e=g-y;f=s("path",{d:["M",p,i,"A",m,m,0,1,1,t,i,"L",t,e,"A",y,y,0,1,0,p,e].join(" ")})}else f=s("circle",{cx:p,cy:g,r:m});else{const t=k+i;let e=["M"].concat(w(k,m).map(String),"A",`${m}`,`${m}`,"0",d>.5?"1":"0","1",w(t,m).map(String),"L");y?e=e.concat(w(t,y).map(String),"A",`${y}`,`${y}`,"0",d>.5?"1":"0","0",w(k,y).map(String)):e.push(`${p}`,`${g}`),k+=i,f=s("path",{d:e.join(" ")})}"string"==typeof e.fill?h=e.fill:Array.isArray(e.fill)?h=null!=(a=null==(n=e.fill)?void 0:n[r])?a:null==(l=e.fill)?void 0:l[0]:"function"==typeof e.fill&&(h=e.fill(r)),h&&f.setAttribute("fill",h),t.appendChild(f)}}}const d=["height","width"],u=t({__name:"VPeity",props:{values:{default:()=>[]},type:{default:"line"},min:{default:void 0},max:{default:void 0},radius:{default:8},innerRadius:{default:5},height:{default:16},width:{default:16},padding:{default:.1},stroke:{default:void 0},strokeWidth:{default:1},fill:{default:void 0}},setup(t){const u=t,f=i(),h=e((()=>{const t=u.height||16;if("pie"===u.type||"donut"===u.type){const i=2*u.radius;return t||i}return t})),c=e((()=>{const t=u.width||16;if("pie"===u.type||"donut"===u.type){const i=2*u.radius;return t||i}return t}));return n((()=>{if(!f.value)return;const t=f.value;t.innerHTML="";const i={type:u.type,height:u.height,width:u.width,fill:t=>{var i;const e=null!=(i=u.fill)?i:[];return e[t%e.length]}};switch(u.type){case"bar":i.min=u.min,i.padding=u.padding,function(t,i,e){var n,l,a;const o=i,r=Math.max(...void 0===e.max?o:o.concat(e.max)),d=Math.min(...void 0===e.min?o:o.concat(e.min)),u=t.getBoundingClientRect(),f=u.width,h=u.height,c=r-d,p=null!=(n=e.padding)?n:2,g=t=>t*f/o.length,m=t=>h-(c?(t-d)/c*h:1);for(let y=0;y<o.length;y++){const i=g(y+p),n=g(y+1-p)-i,u=o[y],f=m(u);let h,v,w=f,k=f;c?u<0?w=m(Math.min(r,0)):k=m(Math.max(d,0)):h=1,h=k-w,0===h&&(h=1,r>0&&c&&w--),"string"==typeof e.fill?v=e.fill:Array.isArray(e.fill)?v=null!=(a=null==(l=e.fill)?void 0:l[y])?a:e.fill[0]:"function"==typeof e.fill&&(v=e.fill(y)),v&&t.appendChild(s("rect",{fill:v,x:i,y:w,width:n,height:h}))}}(t,u.values,i);break;case"line":i.min=u.min,i.stroke=u.stroke,i.strokeWidth=u.strokeWidth,function(t,i,e){var n,l;const a=i;1===a.length&&a.push(a[0]);const o=Math.max(...void 0===e.max?a:a.concat(e.max)),r=Math.min(...void 0===e.min?a:a.concat(e.min)),d=t.getBoundingClientRect(),u=null!=(n=e.strokeWidth)?n:1,f=d.width,h=d.height-u,c=o-r,p=t=>{let i=h;return c&&(i-=(t-r)/c*h),i+u/2},g=p(Math.max(r,0)),m=[0,g];for(let s=0;s<a.length;s++)m.push(s*(f/(a.length-1)),p(a[s]));let y;m.push(f,g),"string"==typeof e.fill?y=e.fill:Array.isArray(e.fill)?y=null==(l=e.fill)?void 0:l[0]:"function"==typeof e.fill&&(y=e.fill(0)),y&&t.appendChild(s("polygon",{fill:y,points:m.join(" ")})),u&&t.appendChild(s("polyline",{fill:"none",points:m.slice(2,m.length-2).join(" "),stroke:e.stroke,"stroke-width":u,"stroke-linecap":"square"}))}(t,u.values,i);break;case"pie":case"donut":i.radius=u.radius,i.innerRadius=u.innerRadius,r(t,u.values,i)}})),(t,i)=>(l(),a("svg",{ref_key:"svgElement",ref:f,xmlns:"http://www.w3.org/2000/svg",class:"peity",height:o(h),width:o(c)},null,8,d))}});export{u as _};
